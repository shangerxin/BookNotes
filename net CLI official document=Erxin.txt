.net CLI official document=Erxin

# Overview 
- The .NET command-line interface (CLI) is a cross-platform toolchain


- help 
```
dotnet --help

Welcome to .NET 9.0!
---------------------
SDK Version: 9.0.300

Telemetry
---------
The .NET tools collect usage data in order to help us improve your experience. It is collected by Microsoft and shared with the community. You can opt-out of telemetry by setting the DOTNET_CLI_TELEMETRY_OPTOUT environment variable to '1' or 'true' using your favorite shell.

Read more about .NET CLI Tools telemetry: https://aka.ms/dotnet-cli-telemetry

----------------
Installed an ASP.NET Core HTTPS development certificate.
To trust the certificate, run 'dotnet dev-certs https --trust'
Learn about HTTPS: https://aka.ms/dotnet-https

----------------
Write your first app: https://aka.ms/dotnet-hello-world
Find out what's new: https://aka.ms/dotnet-whats-new
Explore documentation: https://aka.ms/dotnet-docs
Report issues and find source on GitHub: https://github.com/dotnet/core
Use 'dotnet --help' to see available commands or visit: https://aka.ms/dotnet-cli
--------------------------------------------------------------------------------------
Usage: dotnet [runtime-options] [path-to-application] [arguments]

Execute a .NET application.

runtime-options:
  --additionalprobingpath <path>   Path containing probing policy and assemblies to probe for.
  --additional-deps <path>         Path to additional deps.json file.
  --depsfile                       Path to <application>.deps.json file.
  --fx-version <version>           Version of the installed Shared Framework to use to run the application.
  --roll-forward <setting>         Roll forward to framework version  (LatestPatch, Minor, LatestMinor, Major, LatestMajor, Disable).
  --runtimeconfig                  Path to <application>.runtimeconfig.json file.

path-to-application:
  The path to an application .dll file to execute.

Usage: dotnet [sdk-options] [command] [command-options] [arguments]

Execute a .NET SDK command.

sdk-options:
  -d|--diagnostics  Enable diagnostic output.
  -h|--help         Show command line help.
  --info            Display .NET information.
  --list-runtimes   Display the installed runtimes.
  --list-sdks       Display the installed SDKs.
  --version         Display .NET SDK version in use.

SDK commands:
  build             Build a .NET project.
  build-server      Interact with servers started by a build.
  clean             Clean build outputs of a .NET project.
  format            Apply style preferences to a project or solution.
  help              Opens the reference page in a browser for the specified command.
  msbuild           Run Microsoft Build Engine (MSBuild) commands.
  new               Create a new .NET project or file.
  nuget             Provides additional NuGet commands.
  pack              Create a NuGet package.
  package           Search for, add, remove, or list PackageReferences for a .NET project.
  publish           Publish a .NET project for deployment.
  reference         Add, remove, or list ProjectReferences for a .NET project.
  restore           Restore dependencies specified in a .NET project.
  run               Build and run a .NET project output.
  sdk               Manage .NET SDK installation.
  solution          Modify Visual Studio solution files.
  store             Store the specified assemblies in the runtime package store.
  test              Run unit tests using the test runner specified in a .NET project.
  tool              Install or manage tools that extend the .NET experience.
  vstest            Run Microsoft Test Engine (VSTest) commands.
  workload          Manage optional workloads.

Additional commands from bundled tools:
  dev-certs         Create and manage development certificates.
  fsi               Start F# Interactive / execute F# scripts.
  user-jwts         Manage JSON Web Tokens in development.
  user-secrets      Manage development user secrets.
  watch             Start a file watcher that runs a command when files change.

Run 'dotnet [command] --help' for more information on a command.
```

- command reference 

CLI commands
The following commands are installed by default:

    + Basic commands
new
restore
build
publish
run
test
vstest
pack
migrate
clean
sln
help
store
watch
format (Available since .NET 6 SDK)
    + Project modification commands
package add
package list
package remove
package search
reference add
reference list
reference remove
    + NuGet commands
nuget delete
nuget locals
nuget push
nuget add source (Available since .NET Core 3.1.200 SDK)
nuget disable source (Available since .NET Core 3.1.200 SDK)
nuget enable source (Available since .NET Core 3.1.200 SDK)
nuget list source (Available since .NET Core 3.1.200 SDK)
nuget remove source (Available since .NET Core 3.1.200 SDK)
nuget update source (Available since .NET Core 3.1.200 SDK)
nuget verify (Available since .NET 5 SDK)
nuget trust (Available since .NET 5 SDK)
nuget sign (Available since .NET 6 SDK)
package search (Available since .NET 8.0.2xx SDK)
nuget why (Available since .NET 8.0.4xx SDK)
    + Workload management commands
workload (Available since .NET 7 SDK)
workload config (Available since .NET 8.0.400 SDK)
workload install (Available since .NET 6 SDK)
workload list (Available since .NET 6 SDK)
workload update (Available since .NET 6 SDK)
workload restore (Available since .NET 6 SDK)
workload repair (Available since .NET 6 SDK)
workload uninstall (Available since .NET 6 SDK)
workload search (Available since .NET 6 SDK)
    + Advanced commands
sdk check
msbuild
build-server
dev-certs
dotnet install script
    + Tool management commands
tool install
tool list
tool update
tool restore
tool run
tool uninstall
tool search

- dotnet command 

Synopsis
To get information about the available commands and the environment:

.NET CLI

Copy
dotnet [--version] [--info] [--list-runtimes] [--list-sdks]

dotnet -h|--help
To run a command (requires SDK installation):

.NET CLI

Copy
dotnet <COMMAND> [-d|--diagnostics] [-h|--help] [--verbosity <LEVEL>]
    [command-options] [arguments]
To run an application:

.NET CLI

Copy
dotnet [--additionalprobingpath <PATH>] [--additional-deps <PATH>]
    [--fx-version <VERSION>]  [--roll-forward <SETTING>]
    <PATH_TO_APPLICATION> [arguments]

dotnet exec [--additionalprobingpath <PATH>] [--additional-deps <PATH>]
    [--depsfile <PATH>]
    [--fx-version <VERSION>]  [--roll-forward <SETTING>]
    [--runtimeconfig <PATH>]
    <PATH_TO_APPLICATION> [arguments]
    
- dotnet clean - Cleans the output of a project.    
    
- dotnet dev-certs - Generates a self-signed certificate to enable HTTPS use in development.

$ dotnet dev-certs https --clean --import ./certificate.pfx -p $CREDENTIAL_PLACEHOLDER$

- dotnet format - Formats code to match editorconfig settings.

- dotnet help - Shows more detailed documentation online for the specified command.

dotnet help <COMMAND_NAME> [-h|--help]

- dotnet migrate, deprecated. 

- dotnet msbuild - Builds a project and all of its dependencies. Note: A solution or project file may need to be specified if there are multiple.

- dotnet new - Creates a new project, configuration file, or solution based on the specified template.
```
dotnet new <TEMPLATE> [--dry-run] [--force] [-lang|--language {"C#"|"F#"|VB}]
    [-n|--name <OUTPUT_NAME>] [-f|--framework <FRAMEWORK>] [--no-update-check]
    [-o|--output <OUTPUT_DIRECTORY>] [--project <PROJECT_PATH>]
    [-d|--diagnostics] [--verbosity <LEVEL>] [Template options]

dotnet new -h|--help
```

- dotnet nuget 

dotnet nuget delete - Deletes or unlists a package from the server.

dotnet nuget locals 

dotnet nuget push 

dotnet nuget add source 

dotnet nuget disable source 

dotnet nuget enable source 

dotnet nuget list source 

dotnet nuget remove source 

dotnet nuget update source 

dotnet nuget verify 

dotnet nuget trust 

dotnet nuget sign 

dotnet nuget why 

- dotnet nuget config 

- dotnet pack - Packs the code into a NuGet package. 

- dotnet package 

dotnet package list - Lists the package references for a project or solution.

dotnet package add 

dotnet package list 

dotnet package remove 

dotnet package search 

- dotnet reference add/list/remove 

- dotnet restore - Restores the dependencies and tools of a project.

- dotnet run - Runs source code without any explicit compile or launch commands. 

- dotnet sdk check - Lists the latest available version of the .NET SDK and .NET Runtime, for each feature band.

- dotnet sln - Lists or modifies the projects in a .NET solution file, or migrates the file to an .slnx file.

- dotnet store - Stores the specified assemblies in the runtime package store.

- dotnet test - .NET test driver used to execute unit tests.

- dotnet tool 
dotnet tool install - Installs the specified .NET tool on your machine.

dotnet tool list 

dotnet tool restore 

dotnet tool run 

dotnet tool search 

dotnet tool uninstall 

dotnet tool update 

- dotnet vstest - Runs tests from the specified assemblies.

- dotnet watch - Restarts or hot reloads the specified application, or runs a specified dotnet command, when changes in source code are detected.

- dotnet workload - Provides information about the available workload commands and installed workloads.

dotnet workload sets 

dotnet workload config 

dotnet workload install 

dotnet workload list 

dotnet workload repair 

dotnet workload restore 

dotnet workload search 

dotnet workload uninstall 

dotnet workload update 

- elevated access 
commands can be run elevated:

- tab completion for the .net cli 
https://learn.microsoft.com/en-us/dotnet/core/tools/enable-tab-autocomplete

Once set up, tab completion for the .NET CLI is triggered by entering a dotnet command in the shell and then pressing the Tab key. 


- develop libraries with cli 
https://learn.microsoft.com/en-us/dotnet/core/tutorials/libraries


- develop libraries with the cli 
https://learn.microsoft.com/en-us/dotnet/core/tutorials/libraries

- create templates for the cli 
https://learn.microsoft.com/en-us/dotnet/core/tutorials/cli-templates-create-item-template
https://learn.microsoft.com/en-us/dotnet/core/tutorials/cli-templates-create-project-template
https://learn.microsoft.com/en-us/dotnet/core/tutorials/cli-templates-create-template-package



# MSBuild and project files 
- https://learn.microsoft.com/en-us/dotnet/core/project-sdk/overview

- target frameworks 
https://learn.microsoft.com/en-us/dotnet/standard/frameworks

- dependency managemenmt 
https://learn.microsoft.com/en-us/dotnet/core/tools/dependencies

<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
    ...
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.EntityFrameworkCore" Version="3.1.2" />
  </ItemGroup>

</Project>

- use cli 
$ dotnet package add Microsoft.EntityFrameworkCore
$ dotnet package remove Microsoft.EntityFrameworkCore


# Global and local tools 
-  manage .NET tools
- A .NET tool is a special NuGet package that contains a console application. You can install a tool on your machine in the following ways:

global tool 

global tool in a custom location 

local tool 

- Here are some ways to find tools:

Use the dotnet tool search command to find a tool that's published to NuGet.org.
Use the ".NET tool" package type filter to search for the NuGet website. For more information, see Finding and choosing packages.
See the source code for the tools the ASP.NET Core team created in the Tools directory of the dotnet/aspnetcore GitHub repository.
Learn about diagnostic tools at .NET diagnostic tools.




dotnet tool commands, such as dotnet tool install.
dotnet run --no-build
dotnet-core-uninstall

-  the recommended way to install, run, and uninstall .NET tools that require elevated permissions to execute.

- During development, you may need elevated access to test your application



# Addtional tools 
- reference 
https://learn.microsoft.com/en-us/dotnet/core/additional-tools/
- diagnostics tools 

dotnet-counters is a performance monitoring tool for first-level health monitoring and performance investigation.

dotnet-dump provides a way to collect and analyze Windows and Linux core dumps without a native debugger.

dotnet-gcdump provides a way to collect GC (Garbage Collector) dumps of live .NET processes.

dotnet-monitor provides a way to monitor .NET applications in production environments and to collect diagnostic artifacts (for example, dumps, traces, logs, and metrics) on-demand or using automated rules for collecting under specified conditions.

dotnet-trace collects profiling data from your app that can help in scenarios where you need to find out what causes an app to run slow.

- The WCF dotnet-svcutil tool is a .NET tool that retrieves metadata from a web service on a network location or from a WSDL file.

- xml serializer generator 

Like the Xml Serializer Generator (sgen.exe) for the .NET Framework, the Microsoft.XmlSerializer.Generator NuGet package is the solution for libraries that target .NET 5 (and .NET Core) and later versions


# Diagnostic tools are available in .net core 
- https://learn.microsoft.com/en-us/dotnet/core/diagnostics/

- debuggers 

https://learn.microsoft.com/en-us/dotnet/core/diagnostics/managed-debuggers

- unit testing 
https://learn.microsoft.com/en-us/dotnet/core/testing/

- logging 

https://learn.microsoft.com/en-us/dotnet/core/diagnostics/logging-tracing

- metrics 

https://learn.microsoft.com/en-us/dotnet/core/diagnostics/metrics

- distribute traces 
https://learn.microsoft.com/en-us/dotnet/core/diagnostics/distributed-tracing


- Collect instrumentation

OpenTelemetry - a cross-platform, vendor-neutral standard for collecting and exporting telemetry
.NET CLI tools such as dotnet-counters
dotnet-monitor - an agent for collecting traces and telemetry
Third-party libraries or app code can read the information from the System.Diagnostics.Metrics, ILogger<TCategoryName>, and System.Diagnostics.Activity APIs.


- resource monitoring 
https://learn.microsoft.com/en-us/dotnet/core/diagnostics/diagnostic-resource-monitoring


- Specialized diagnostics

EventSource, Dumps, DiagnosticSource. For more information, see the specialized diagnostics article.

- diagnostics tools 

.NET supports a number of CLI tools that can be used to diagnose your applications.

- more 

.NET Core diagnostics tutorials
Write your own diagnostic tool
The diagnostics client library lets you write your own custom diagnostic tool best suited for your diagnostic scenario. Look up information in the Microsoft.Diagnostics.NETCore.Client API reference.

Debug a memory leak
Tutorial: Debug a memory leak walks through finding a memory leak. The dotnet-counters tool is used to confirm the leak and the dotnet-dump tool is used to diagnose the leak.

Debug high CPU usage
Tutorial: Debug high CPU usage walks you through investigating high CPU usage. It uses the dotnet-counters tool to confirm the high CPU usage. It then walks you through using Trace for performance analysis utility (dotnet-trace) or Linux perf to collect and view CPU usage profile.

Debug deadlock
Tutorial: Debug deadlock shows you how to use the dotnet-dump tool to investigate threads and locks.

Debug ThreadPool Starvation
Tutorial: Debug threadPool starvation shows you how to use the dotnet-counters and dotnet-stack tools to investigate ThreadPool starvation.

Debug a StackOverflow
Tutorial: Debug a StackOverflow demonstrates how to debug a StackOverflowException on Linux.

Debug Linux dumps
Debug Linux dumps explains how to collect and analyze dumps on Linux.

Measure performance using EventCounters
Tutorial: Measure performance using EventCounters in .NET shows you how to use the EventCounter API to measure performance in your .NET app.



# Overview of .net source code analysis 
- .NET compiler platform (Roslyn) analyzers inspect your C# or Visual Basic code for code quality and style issues. 

Code quality analysis ("CAxxxx") rules inspect your C# or Visual Basic code for security, performance, design and other issues. Analysis is enabled, by default, for projects that target .NET 5 or later. 


# SYSLIB diagnotstics 
-  obsoletions 

- Starting in .NET 9, some features make use of the ExperimentalAttribute to indicate that the API shape or functionality is included in the release but not yet officially supported.

- source-generator, If your .NET 6+ project references a package that enables source generation of code, for example, a logging solution, then the analyzers that are specific to source generation will run at compile time. 


# API compatibility 
https://learn.microsoft.com/en-us/dotnet/fundamentals/apicompat/overview

By default, the validation performs compatibility checks. However, you can also opt in to strict mode. In strict mode, the validation performs equality checks.