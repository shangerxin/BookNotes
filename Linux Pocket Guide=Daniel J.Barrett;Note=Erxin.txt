Linux Pocket Guide=Daniel J.Barrett;Note=Erxin

# What's in this book 
- it's a short guide 
    + example 
    count file lines 
    $ wc -l file-name 
    
    + mesure free disk space 
    $ df 
    
    cat for short text file 
    
    od for binary files 
    
    acro, read read for pdf files 
    
    less for long ones 
    
- what is linux 
- what is distro? different varieties of linux shared certain core components but may look different and include different program and files each variety is called a distro(short for distribution)

- shell, linux command line interface 
- reading this book 
- shell prompts 
- keystrokes, ^ means compress and hold control key 
- get help 
$ man command-name 
display help doc for a command 

$ man -k keyword 
$ search for document with key word 

    + use info command, which is a extended hypertext help system 
$ info command-name 
use shortcut 
h for help 
q to quit 
jump between hyperlinks with tab 
follow a hyperlink with enter 

- get help from gnome and kde help from http://www.gnome.org, http://www.kde.org 

- distro specific websites 

- linux help sites 
http://www.linuxquestions.org 
http://unix.stackexchange.com 
http://www.linuxhelp.net 
http://www.linuxforums.org 

- linux, a first view the major part 
    + the kernel, handle files, disks networking and other necessities we take for granted 
    + supplied programs, web browsing audio, video, ...
    + the shell, user interface for typing commands 
    + x, a graphic system which provides window, ..
    
- the graphical desktop 
a main menu or taskbar 
desktop icons 
ions to run app 

- run a shell, typical menu items are 
Terminal
xterm 
gnome-terminal 
konsole 
uxterm 

- to become a superuser with command su 
$ su -l 

use sudo command to execute a single command as super user 
$ sudo command-name 

# file system 
- linux all files and directories descend from the root 
/bin/ 
 etc/ 
 home/ 
      dan/
      lisa/
 var/
 usr/
     bin/
     lib/
     
- absolute and relative path 
- home directory ~
    + display home path 
    $ echo $HOME 
    
    $ echo ~
    
    + switch to a specify user's home directory 
    $ cd ~<user-name>
    
- system directory, there names often contain three parts, which we'll call the scope, category and application 

/usr/local/share/emacs 
scope: /usr/local 
category: share/ 
application: emacs 

    + categroy tell you the types of files found in a directory, common category, if the category is bin, it probably 
bin 
sbin, usually binary files intended to be run by the superuser 
lib 
libexec 

categories for documentation:
doc 
info,   documentation files for emacs's built-in help system 
man, documentaion display by the man program 
share, 

categories for configuration:
etc, configuration files for the system and other micellaneous stuff 
init.d, configuration files for booting linux 
rc.d, configuration files for booting linux also rc1.d, rc2.d, ...

categories for programming: 
include, header files for programming 
src, source code for programs 

categories for web files: 
cgi-bin, scripts/programs that run on web pages 
html, web pages 
public_html, web pages typically in user's home directories 
www, web pages 

categories for display: 
fonts, fonts surprise 
X11, X window system files 

categories for hardware: 
dev, device files for interfacing with disks and other hardware 
media, mount points directories that provide access to disks 
mnt, mount points directories that provide access to disks 
misc, mout points directories that provide access to disks 

categories for runtime files:
var, files specific to this computer, created and updated as the computer runs 
lock, lock files, created by program to say "i am running"
log, log files that track important system events, containing error, warning, and information messages 
mail, mailboxes for incoming mail 
run, PID files, which contain the IDs of running processes, these files are often consulted to track or kill particular process 
spool, files queued or in transit such as outgoing email, print jobs and scheduled jobs 
tmp, temporary storage for programs and/or people to use 
proc, operating system state 

    + directory path scope 
/, system files supplied linux 
/usr, more system files supplied with linux 
/usr/games,
/usr/local, system files developed "locally" either for your organization or your individual computer 
/usr/X11R6, files pertaining to the X window system 

    + directory path application 
    + operating system directories 
/boot 
/lost+found, damaged files that were rescured by a disk recovery tool 
/proc, describes currently running processes for advanced users, provied views into the running kernel and have special properties. they always be zero sized read-only and dated now. they magically contain information about the linux kernel 
$ cat /proc/version 
will display linux version 
/proc/ioports, list of input/output hardware 
/proc/version, uname command prints the same information, system version 
/proc/uptime, seconds elapsed since the last boot 
/proc/nnn, the nnn is a positive integer, information about the linux process with ID nnn 
/proc/self, information about the current proces you're running 

- file protection 
    + see ownership and permissions of a file 
    $ ls -l <file-name> 
    -rw-r--r-- 1 smith smith   7384 Jan 04 22:40 file-name 
    
    + ownership of directory 
    $ ls -ld <dir-name>
    drwxr-x--- 3 smith smith   4096 Jan 08 15:02 dirname 
    
    the 10 leftmost characters a string of (r)ead, (w)rite, x(execute) and dashes 
    position    meaning 
    1           file type, -=file, d=directory, l=symbolic link, p=named pipe, c=character device, b=block device 
    2-4         read, write and execute permission for file's owner 
    5-7         read, write and execute permission for file's group user 
    8-10        read, write and execute permission for file's other user 
    

# the shell 
- check who's logged in 
$ who 

- shell versus programs, check a program is linux built-in or not by 
$ type <command-name>

$ type who 
who is /usr/bin/who 

$ type cd 
is a shell builtin 

- selected features of the bash shell 
- wildcards 
*, ?
[set]
[^set], not in 
[!set], not in 

- dot files, filenames start with a leading period, it will not be displayed by some program 

ls omit the file unless you provde the -a option 
shell wildcards do not match a leading period 

- brace expansion
{X, YY, ZZZ} 

$ echo sand{X, YY, ZZ}wich 
sandXwich sandYYwich sandZZZwich 

braces work with any string

- shell variables 
$ varName = 3 
$ echo $varName 

    + standard and commonly defined by your shell upon login 
DISPLAY, the name of your X window
HOME 
LOGNAME, login name 
MAIL, incomming mailbox such as /var/spool/mail/smith 
OLDPWD, shell's previous directory prior to the last cd command 
PATH, shell search path 
PWD, current working directory 
SHELL, the path to your shell 
TERM, the type of your terminal 
USER, your login name 

    + display environment variables 
    $ printenv 
    
    + expose a variable to other program 
    $ export varName 
    or 
    $ export varName=value 
    
- search path, critical variable PATH tells where to look 

- aliases, built-in command alias defines a convenient shorthand for a longer command 
$ alias ll='ls -l' 

define alias in your ~/.bashrc file 

- input/output redirectory >,>>,<,<<
$ command >& output
redirect both output and error 

$ command > outfile 2> error file 

- pipes 
$ command1|command2 

- combining commands
    + invoke several commands in sequence on a single command 
    $ command1; command2; 

    + run in sequence but stop on any error 
    $ command1 && command2 
    
    + run a sequence of commands and stopping execution as soon as one succeeds 
    $ command1 || command2
    
- quoting, normally shell treats whitespace simply as separating the words on the command line 
$ echo 'a b c' 
$ echo "a b c"

backquotes(backsticks) cause their contents to be evaluated 
$ echo my name is `whoami`

- escaping with \
$ echo a\* 
a* 

escape control characters(tabs, newlines, ^D and so on) ^V ^I 

- command line editing with emacs keys 
$ set -o emacs 
$ set -o vi 

- command history 
hostory, print history 
history, print most recent n commands 
history -c, clear 
!! re-run previous command 
!N re-run command number N in history 
!-N re-run command typed N commands ago 
!$ represents the last paramters from the previous commands 
    + example 
    $ ls a* 
    $ rm !$ 
!*represents all parameters from the previous command 

- filename completion, use TAB, two TAB will present alternative 

- shell job control 
jobs, list your jobs 
&, run a job in the background 
suspend, suspend a shell 
fg, unsuspend a job, bring it into the forground 
bg, make a suspend job run in the background 
% bg [%jobnumber]

all linux shell have job control, the abilityto run programs in the background and forground 
suspend, stop a forground job temporarily

- tailoring shell behavior 
edith .bash_profile and .bashrc in your home directory. this is two example scripts 

- basic file operation 
ls 
cp 
mv 
rm, delete files 
ln, create links to a file 

    + copy multiple files to a directory 
    $ cp file1 file2 destination 
    
    + ln -s file link-name
    s, soft link which like shortcut if the orignal file delete then the link become invalid 
    without -s will create hard link which will still point to the file 

    another difference is soft link could point to directory but hard link need administrator previliges to do it 
    
- diretory options 
cd 
pwd 
basename, print the final part of a path 
mkdir 
rmdir 
rm -r

- file viewing 
cat, view files in their entirety 
less 
head 
tail 
nl, view text files with their lines numbered 
strings, display text that's embedded in a binary file 
od, view data in octal 
xxd, view data in hexadecimal 
acroread, view pdf 
gv, view postscript or pdf files 
xdvi, view tex dvi files 

- file creation and editing 
emacs 
vim 
soffice, office suite for editing word, excel and power point 
abiword, edit word 
gnumic, edit excel 

- creating a file quickly 
$ touch file-name 

- default editor 
$ EDITOR = emacs 
set the environment variables 
$ VISUAL = emacs 
$ export EDITOR VISUAL 

$ nano [options] [files]

$ emacs [options] [files]

$ vim [options] [files]

gvim,a new x window vim 

vim, run in existing shell window 

vimtutor, tutiorial for vim 

- stat [options] files
The stat command lists important attributes of files (by default) or filesystems (-f option). File information looks like:

stat Display attributes of files and directories.

wc	 Count bytes, words, and lines in a file.

du	 Measure disk usage of files and directories.

file   Identify (guess) the type of a file.

touch  Change timestamps of files and directories.

chown   Change owner of files and directories.

chgrp   Change group ownership of files and directories.

chmod   Change protection mode of files and directories.

umask   Set a default mode for new files and directories.

chattr  Change extended attributes of files and directories.

lsattr  List extended attributes of files and directories.

- File location 

find  Locate files in a directory hierarchy.

xargs   Process a list of located files (and much more).

locate  Create an index of files, and search the index for string.

which   Locate executables in your search path (command).

type    Locate executables in your search path (bash built-in).

whereis Locate executables, documentation, and source files.

- File text manipulation 

grep    Find lines in a file that match a regular expression.

cut     Extract columns from a file.

paste   Append columns.

tr      Translate characters into other characters. tr is great for quick and simple translations, but for more powerful jobs consider sed, awk

expand, unexpand  Convert between tabs and spaces.

sort    Sort lines of text by various criteria.

uniq    Locate identical lines in a file.

tee	    Copy a file and print it on standard output, simultaneously.

fgrep   command is just like grep, but instead of accepting a regular expression, it accepts a list of fixed strings, separated by newlines. It’s the same as grep -F

- File compression and packaging 

tar     Package multiple files into a single file.

gzip    Compress files with GNU Zip.

gunzip	Uncompress GNU Zip files.

bzip2	Compress files in BZip format.

bunzip2	Uncompress BZip files.

bzcat	Compress/uncompress BZip files via standard input/output.

compress    Compress files with traditional Unix compression.

uncompress	Uncompress files with traditional Unix compression.

zcat        Compress/uncompress file via standard input/output (gzip or compress).

zip         Compress files in Windows Zip format.

unzip       Uncompress Windows Zip files.

munpack	    Extract MIME data to files.

mpack       Convert a file into MIME format.

- file comparison 

diff    Line-by-line comparison of two files or directories.

comm    Line-by-line comparison of two sorted files.

cmp     Byte-by-byte comparison of two files.

md5sum  Compute a checksum of the given files (MD5).

- pdf and post script file handling 

pdftotext   Extract text from PDF files.

ps2ascii    Extract text from PostScript or PDF files.

pdfseparate	Extract individual pages from a PDF file.

pdftk           Split, join, rotate, and otherwise manipulate PDF files.

pdf2ps, ps2pdf  Convert between PDF and PostScript file formats.

- print files 

lpr	    Print a file.

lpq	    View the print queue.

lprm    Remove a print job from the queue.

- Spellchecking
look    Look up the spelling of a word quickly.

aspell  Interactive spelling checker.

spell   Batch spelling checker.

- disks and filesystes 

df      Display available space on mounted filesystems.

mount   Make a disk partition accessible.

umount  Unmount a disk partition (make it inaccessible).

fsck    Check a disk partition for errors.

eject   Eject a CD, DVD, or other removable disk.


    + Some common devices in /dev are:

sda     First block device, such as SCSI, SATA, USB, or FireWire hard drives; partitions are sda1, sda2, ...

sdb     Second block device; partitions are sdb1, sdb2, ... Likewise for sdc, sdd, ...

scd0    First SCSI CD-ROM drive (then scd1, scd2, ...)


    + partitioning and formatting 
    
gparted, parted, fdisk, or sfdisk
Partition a hard drive. Any of these programs will work in most cases. gparted has the simplest user interface.

mkfs    Format a hard disk (i.e., create a new filesystem).

The df (disk free) program shows you the size, used space, and free space on a given disk partition.


- backups and remote storage 

rsync   Efficiently copy a set of files, even across a network.

dd      Low-level copying of data. it can even perform data conversions while it copies

growisofs   Burn a DVD or Blu-ray disc.

- viewing proceses 

ps      List process.

uptime  View the system load.

w       List active processes for all users.

top     Monitor resource-intensive processes interactively.

free    Display free memory.

- control processes 

kill    Terminate a process (or send it a signal).

timeout Kill a command that runs for too long.

nice    Invoke a program at a particular priority.

renice  Change a process’s priority as it runs.

flock   Ensure that only one copy of a process runs at the same time, using locks.

- scheduling jobs 

sleep	Wait a set number of seconds, doing nothing.

watch	Run a program at set intervals.

at	    Schedule a job for a single, future time.

crontab	Schedule jobs for many future times.

- logins, logouts and shutdowns 

shutdown command halts or reboots a Linux system; only the superuser may run it.
 
To log out from a remote shell, just close the shell (type exit or logout).

- systemctl is part of a service manager called systemd; a full treatment is beyond the scope of this book

sudo systemctl poweroff    Shut down the system.

sudo systemctl reboot      Reboot the system.

sudo systemctl suspend     Suspend the system.

- user and their environment 

logname	    Print your login name.

whoami	    Print your current, effective username.

id	        Print the user ID and group membership of a user.

who	        List logged-in users, long output.

users	    List logged-in users, short output.

finger	    Print information about users.

last	    Determine when someone last logged in.

printenv	Print your environment.

- User Account Management
useradd	    Create an account.

userdel	    Delete an account.

usermod	    Modify an account.

passwd	    Change a password.

chfn	    Change a user’s personal information.

chsh	    Change a user’s shell.

- becoming the superuser 

sudo ...

su command, which also creates a superuser shell, but you’ll need a different password, called the root password


sudo and su have important differences. su is standard on every Linux system, but you need a password other than your own in order to run it. sudo uses your own password, but it must be configured to do so.

- group management 

groups      Print the group membership of a user.

groupadd    Create a group.

groupdel    Delete a group.

groupmod    Modify a group.


- systemd 

The main aim is to unify service configuration and behavior across Linux distributions.[8] Its primary component is a "system and service manager"


https://en.wikipedia.org/wiki/Systemd


systemd includes features like on-demand starting of daemons, snapshot support, process tracking[40] and Inhibitor Locks.[41] It is not just the name of the init daemon but also refers to the entire software bundle around it

systemd is a system and service manager for Linux operating systems.
systemctl is a command to introspect and control the state of the systemd system and service manager. Not to be confused with sysctl.
systemd-analyze may be used to determine system boot-up performance statistics and retrieve other state and tracing information

    + anacillary components 
    
    systemd-journald is a daemon responsible for event logging, with append-only binary files serving as its logfiles.
    
    libudev is the standard library for utilizing udev
    
    localed manages the system locale and keyboard layout.
    
    systemd-logind is a daemon that manages user logins and seats in various ways. 
    
    hostnamed manages the system hostname.
    
    homed is a daemon that provides portable human-user accounts that are independent of current system configuration. homed moves various pieces of data such as UID/GID from various places across the filesystem into one file, ~/.identity. homed manages the user's home directory
    
    networkd is a daemon to handle the configuration of the network interfaces.
    
    resolved provides network name resolution to local applications.
    
    systemd-boot systemd-boot is a boot manager, formerly known as gummiboot.
    
    systemd-bsod systemd-bsod is an error reporter used to generate Blue Screen of Death.
    
    systemd-nspawn may be used to run a command or OS in a namespace container.
    
    systemd-timedated is a daemon that can be used to control time-related settings, such as the system time, system time zone, or selection between UTC and local time-zone system clock.
    
    timesyncd is a client NTP daemon for synchronizing the system clock across the network.
    
    systemd-tmpfiles is a utility that takes care of creation and clean-up of temporary files and directories. 
    
    udev is a device manager for the Linux kernel, which handles the /dev directory and all user space actions when adding/removing devices, including firmware loading
    
    + linux manual page 
    
systemd is usually not invoked directly by the user, but is installed as the /sbin/init symlink and started during early boot.The user manager instances are started automatically through the user@.service(5) service.

only units that are kept loaded into memory are those for which at least one of the following conditions is true:

    1. It is in an active, activating, deactivating or failed state  (i.e. in any unit state except for "inactive")

    2. It has a job queued for it

    3. It is a dependency of at least one other unit that is loaded into memory

    4. It has some form of resource still allocated (e.g. a service unit that is inactive but for which a process is still lingering that ignored the request to be terminated)

    5. It has been pinned into memory programmatically by a D-Bus call
    
    + Known Environment Variables
    
    https://systemd.io/ENVIRONMENT
    
    + systemd Homepage
    
    https://systemd.io/
    
    +  systemd-system.conf, system.conf.d, systemd-user.conf, user.conf.d - System and session service manager configuration files
    
    + locale.conf - Configuration file for locale settings /etc/locale.conf 
    
    + systemctl may be used to introspect and control the state of the "systemd" system and service manager. 
    
    + journalctl - Print log entries from the systemd journal
    
    + systemd-notify - Notify service manager about start-up completion and other daemon status changes
    
    + daemon - Writing and packaging system daemons
    
    + org.freedesktop.systemd1 - The D-Bus interface of systemd

    
- linux kernel 

cgroups (abbreviated from control groups) is a Linux kernel feature that limits, accounts for, and isolates the resource usage (CPU, memory, disk I/O, etc.[1]) of a collection of processes
    
kernfs, a set of functions that contain the functionality required for creating the pseudo file systems used internally by various kernel subsystems so that they may use virtual files.

- host information 

uname	    Print basic system information.

hostname    Print the system’s hostname.

domainname  Same as hostname -y.

ip	        Set and display network interface information.

ifconfig    Older command to set and display network interface information.

- host location 

host        Look up hostnames, IP addresses, and DNS info.

whois	    Look up the registrants of Internet domains.

ping	    Check if a remote host is reachable.

traceroute	View the network path to a remote host.

- Network connections 

ssh	       Securely log into a remote host, or run commands on it.

scp	       Securely copy files to/from a remote host (batch).

sftp	   Securely copy files to/from a remote host (interactive).

ftp	       Copy files to/from a remote host (interactive, insecure!).

netcat	   Create arbitrary network connections.

    + old-school Linux user, you might be using telnet for connecting in this way to arbitrary TCP ports. netcat is much more flexible. For example, using two shells, you can create a client and a service and have them talk to each other. Start a service listening on port 55555:

$ netcat -l 55555
Now in another window, run a client that talks to that same port, and type a message:

$ netcat localhost 55555
Hello world, how are you?

- Email
mutt	   Text-based mail client.

mail	   Minimal text-based mail client.

mailq	   View the outgoing mail queue on your system.

    + The official Mutt site is http://www.mutt.org. For a different command-line mail client for Linux, check out alpine (http://patches.freeiz.com/).
    
- Web Browsing
lynx    Text-only web browser.

wget    Download web pages and files.

     + other text-based browsing but Lynx isn’t to your taste, try similar programs such as w3m, links, and elinks

- Instant messaging 

write	Send messages to a terminal.

mesg    Prohibit write.

tty     Print your terminal device name.

sendxmpp    Send instant messages via XMPP (Jabber).

profanity   Text-based XMPP client.

irssi       Text-based IRC client.

- Screen output 

echo        Print simple text on standard output.

printf	    Print formatted text on standard output.

yes	        Print repeated text on standard output.

seq	        Print a sequence of numbers on standard output.

clear       Clear the screen or window.

- Copy and paste 

xclip       Copy and paste between the shell and the clipboard.

xsel        Manipulate the clipboard from the shell.

- Math and Calculations
expr        Do simple math on the command line.

bc          Text-based calculator. bc is a text-based calculator that reads arithmetic expressions

dc          Text-based RPN calculator.

- Dates and Times
cal	        Print a calendar.

date	    Print or set the date and time.

ntpdate	    Set the system time using a remote timeserver.

- Graphics
display	    Display a graphics file.

convert	    Convert files from one graphical format into another.

mogrify	    Modify a graphics file.

montage	    Combine graphics files.

- Audio and Video
cdparanoia  Rip audio from CDs to WAV files.

lame        Convert from WAV to MP3.

id3info     View ID3 tags in an MP3 file.

id3tag      Edit ID3 tags in an MP3 file.

ogginfo     View information about an OGG file.

metafla     View and edit information about a FLAC file.

sox         Convert between audio file formats.

mplayer     Play a video or audio file.

    + popular video players for Linux include vlc (http://www.videolan.org/vlc/), kaffeine (http://kaffeine.kde.org/), and xine (http://www.xine-project.org/).
    
- Installing software 

*.deb files, Debian packages, used by Debian, Ubuntu, and other distros. We’ll cover the package management commands aptitude, apt-get, and dpkg

*.rpm files, RPM Package Manager files are used by Red Hat, Fedora, CentOS, and other distros. install using dnf, yum and rpm 

*.tar.gz files and *.tar.bz2 files. unzip the files 

- Programming with shell scripts bash 

- beyond shell scripting 

https://gcc.gnu.org/


http://www.mono-project.com/

http://java.com/

http://www.perl.com/

http://php.net/

https://www.python.org/

http://www.ruby-lang.org/





