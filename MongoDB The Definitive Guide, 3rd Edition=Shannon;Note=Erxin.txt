MongoDB The Definitive Guide, 3rd Edition=Shannon;Note=Erxin

# Getting started 
- MongoDB is the document: an ordered set of keys with associated values.
- Any UTF-8 character is allowed in a key

Keys must not contain the character \0 (the null character)

The . and $ characters have some special properties and should be used only in certain circumstances

- UTF-8 string, with the following restrictions:

The empty string (“”) is not a valid database name.

A database name cannot contain any of these characters: /, \, ., ", *, <, >, :, |, ?, $, (a single space), or \0 (the null character). Basically, stick with alphanumeric ASCII.

Database names are case-insensitive.

Database names are limited to a maximum of 64 bytes.

- database reserved names 

admin The admin database plays a role in authentication and authorization. 
local This database stores data specific to a single server.
config Sharded MongoDB clusters

- start server with 

$ mongod

- shell

mongo executable:

$ mongo

shell is a full-featured JavaScript interpreter, capable of running arbitrary JavaScript programs

- To see the database to which db is currently assigned

> db 
> use <db name>

You may access collections from the db variable
> db.movies 

- basic operations 

    + create The insertOne function adds a document to a collection. 
    > move = movie = {"title" : "Star Wars: Episode IV - A New Hope",
    ... "director" : "George Lucas",
    ... "year" : 1977}
    > db.movies.insertOne(movie)
    {
        "acknowledged" : true,
        "insertedId" : ObjectId("5721794b349c32b32a012b11")
    }
    
    + search calling find on the collection, find and findOne can be used to query a collection
    
    > db.movies.find().pretty()
    {
        "_id" : ObjectId("5721794b349c32b32a012b11"),
        "title" : "Star Wars: Episode IV - A New Hope",
        "director" : "George Lucas",
        "year" : 1977
    }
    
    + update ,  modify our post, we can use updateOne. updateOne takes (at least) two parameters
    
    > db.movies.updateOne({title : "Star Wars: Episode IV - A New Hope"},
    ... {$set : {reviews: []}})
    WriteResult({"nMatched": 1, "nUpserted": 0, "nModified": 1})
    
    + delete, deleteOne and deleteMany permanently delete documents 
    
- basic datatypes, MongoDB can be thought of as “JSON-like” in that they are conceptually similar to objects

null 
boolean 
number 
string 
date                {"x" : new Date()}
array 
object id           ObjectId()
binary              string of arbitrary bytes, such as save non utf-8 string to db 
code                {"x": function(){/*...*/}}

- A document can be used as the value for a key. This is called an embedded document.

{
    "name" : "John Doe",
    "address" : {
        "street" : "123 Park Street",
        "city" : "Anytown",
        "state" : "NY"
    }
}

document stored in MongoDB must have an "_id" key. The "_id" key’s value can be any type

ObjectId is the default type for "_id". The ObjectId class is designed to be lightweight, while still being easy to generate in a globally unique way across different machines.

 if there is no "_id" key present when a document is inserted, one will be automatically added to the inserted document.